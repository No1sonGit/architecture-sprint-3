
asyncapi: '2.0.0'
info:
  title: Heating Control System Async API
  version: 2.0.0
  description: Асинхронный API для управления устройствами и телеметрией.

servers:
  production:
    url: kafka
    protocol: kafka

channels:
  telemetry-measurement:
    description: Канал для получения новых телеметрических данных от устройств.
    subscribe:
      summary: Подписка на новые измерения телеметрии
      operationId: newTelemetryMeasurement
      message:
        contentType: application/json
        payload:
          type: object
          properties:
            device_id:
              type: string
            metric_type:
              type: string
              description: Тип метрики (например, температура, влажность)
            value:
              type: number
              format: float
            timestamp:
              type: string
              format: date-time

  control-command-sent:
    description: Канал для отправки команд управления устройствами.
    publish:
      summary: Публикация команды управления устройством
      operationId: controlCommandSent
      message:
        contentType: application/json
        payload:
          type: object
          properties:
            device_id:
              type: string
            command:
              type: string
              description: Команда для выполнения (например, включить/выключить устройство)
            timestamp:
              type: string
              format: date-time

  user-notification:
    description: Канал для отправки уведомлений пользователям.
    publish:
      summary: Публикация уведомления для пользователя
      operationId: userNotification
      message:
        contentType: application/json
        payload:
          type: object
          properties:
            user_id:
              type: string
            message:
              type: string
            event_type:
              type: string
            timestamp:
              type: string
              format: date-time
